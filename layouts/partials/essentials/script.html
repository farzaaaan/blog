      <!-- {{/* testing JS from plugins */}}
      {{ $tabalgorithm := .Site.Params.fingerprintAlgorithm | default "sha256" }}
      {{ $tab := resources.Get "js/tab.js" }}
      {{ $tab = $tab | resources.Minify | resources.Fingerprint $tabalgorithm }}
      <script
        type="text/javascript"
        src="{{ $tab.RelPermalink }}"
        integrity="{{ $tab.Data.Integrity }}"
      ></script> -->

<!-- JS Plugins + Main script -->
{{ $scripts := slice }}
{{ $scriptsLazy := slice }}
{{ range .Site.Params.plugins.js }}

  {{ if findRE "^http" .link }}
    <script
      src="{{ .link | relURL }}"
      type="application/javascript"
      {{ .attributes | safeHTMLAttr }}></script>
  {{ else }}
    {{ if not .lazy }}
      {{ $scripts = $scripts | append (resources.Get .link) }}
    {{ else }}
      {{ $scriptsLazy = $scriptsLazy | append (resources.Get .link) }}
    {{ end }}
  {{ end }}
{{ end }}

<!-- main script -->
{{ $scripts = $scripts | append (resources.Get "js/main.js") }}
{{ $scripts = $scripts | resources.Concat "js/script.js" }}

{{/* $scriptsLazy = $scriptsLazy | resources.Concat "js/script-lazy.js" */}}

{{ if hugo.IsProduction }}
  {{ $scripts = $scripts | minify | fingerprint }}
  {{ $scriptsLazy = $scriptsLazy | minify | fingerprint }}
{{ end }}

{{/* scripts */}}
<script
  crossorigin="anonymous"
  integrity="{{ $scripts.Data.Integrity }}"
  src="{{ $scripts.RelPermalink }}"></script>

